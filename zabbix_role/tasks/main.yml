---
- name: Dodaj zmienne per środowisko
  include_vars: "{{ ansible_os_family }}.yml" 

- include_tasks: "version-{{ ansible_os_family }}.yml"

- include_tasks: zabbixAgentDebian.yml
  when: >
    ( ansible_distribution == "Debian" and
    ansible_distribution_version is version('8', '>') )

#
#
# Dodać walidacje czy wersja instalowana nie jest nisza od aktualnej. Podobnie jak w windowsie
#
#
- include_tasks: "configure-RedHat.yml"

- include_tasks: agent-RedHat.yml
  when: >
    ( install_RedHat == '0' and 
    ansible_facts['os_family'] == "RedHat" )

#- include_tasks: "configure-Windows.yml"
#  when: >
#    ( zabbixAgentWindows_version >= zabbix_version_check.win_file_version.product_version and 
#    ansible_facts['os_family'] == "Windows" )
#
#- include_tasks: agent-Windows.yml
#  when: >
#    ( install == '0' and ansible_facts['os_family'] == "Windows" )